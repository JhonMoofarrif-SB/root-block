/**
 * ============================================================================
 * Button Component - Root Block Design System
 * ============================================================================
 * 
 * Componente CSS moderno con:
 * - CSS Nesting nativo
 * - @layer para control de cascada
 * - Logical Properties para internacionalizaci√≥n (RTL/LTR)
 * - clamp() para responsive fluido
 * 
 * ============================================================================
 * üìã √çNDICE DE NAVEGACI√ìN
 * ============================================================================
 * 
 * 1. LAYERS DECLARATION ...................... L√≠nea ~40
 * 2. RESET LAYER ............................. L√≠nea ~50
 * 3. TOKENS LAYER ............................ L√≠nea ~60
 *    - Variables CSS base (STROKE default)
 * 4. BASE LAYER .............................. L√≠nea ~115
 *    - Estilos base del componente
 *    - Estados interactivos (:hover, :active, :focus, :disabled)
 * 5. VARIANTS LAYER .......................... L√≠nea ~180
 *    ‚îú‚îÄ PRIMARY ............................. L√≠nea ~185
 *    ‚îú‚îÄ SECONDARY ........................... L√≠nea ~195
 *    ‚îú‚îÄ TERTIARY ............................ L√≠nea ~205
 *    ‚îî‚îÄ ERROR ............................... L√≠nea ~215
 * 6. STYLE-VARIANTS LAYER .................... L√≠nea ~255
 *    ‚îú‚îÄ STROKE (default) .................... L√≠nea ~265
 *    ‚îú‚îÄ FILL ................................ L√≠nea ~275
 *    ‚îÇ  ‚îú‚îÄ PRIMARY FILL ..................... L√≠nea ~280
 *    ‚îÇ  ‚îú‚îÄ SECONDARY FILL ................... L√≠nea ~295
 *    ‚îÇ  ‚îú‚îÄ TERTIARY FILL .................... L√≠nea ~310
 *    ‚îÇ  ‚îî‚îÄ ERROR FILL ....................... L√≠nea ~325
 *    ‚îî‚îÄ TEXT ................................ L√≠nea ~385
 *       ‚îú‚îÄ PRIMARY TEXT ..................... L√≠nea ~405
 *       ‚îú‚îÄ SECONDARY TEXT ................... L√≠nea ~410
 *       ‚îú‚îÄ TERTIARY TEXT .................... L√≠nea ~415
 *       ‚îî‚îÄ ERROR TEXT ....................... L√≠nea ~420
 * 7. SIZES LAYER ............................. L√≠nea ~445
 *    ‚îú‚îÄ SMALL ............................... L√≠nea ~450
 *    ‚îú‚îÄ MEDIUM (default) .................... L√≠nea ~455
 *    ‚îî‚îÄ LARGE ............................... L√≠nea ~460
 * 8. MODIFIERS LAYER ......................... L√≠nea ~470
 *    ‚îú‚îÄ SQUARE .............................. L√≠nea ~475
 *    ‚îú‚îÄ CIRCLE .............................. L√≠nea ~480
 *    ‚îî‚îÄ BLOCK ............................... L√≠nea ~490
 * 9. ICON-POSITIONS LAYER .................... L√≠nea ~500
 *    ‚îú‚îÄ ICON-LEFT ........................... L√≠nea ~510
 *    ‚îú‚îÄ ICON-RIGHT .......................... L√≠nea ~525
 *    ‚îî‚îÄ ICON-ONLY ........................... L√≠nea ~540
 * 10. STATES LAYER ........................... L√≠nea ~555
 *     ‚îî‚îÄ LOADING ............................ L√≠nea ~565
 *        ‚îú‚îÄ Loading Left (default) .......... L√≠nea ~575
 *        ‚îú‚îÄ Loading Right ................... L√≠nea ~590
 *        ‚îú‚îÄ Loading Icon Only ............... L√≠nea ~605
 *        ‚îî‚îÄ Spinner Colors by Variant ....... L√≠nea ~625
 * 11. ANIMATIONS ............................. L√≠nea ~660
 * 12. UTILITIES LAYER ........................ L√≠nea ~670
 *     ‚îú‚îÄ High Contrast Mode ................. L√≠nea ~675
 *     ‚îú‚îÄ Reduced Motion ..................... L√≠nea ~685
 *     ‚îú‚îÄ Mobile Responsive .................. L√≠nea ~695
 *     ‚îú‚îÄ Desktop Responsive ................. L√≠nea ~705
 *     ‚îî‚îÄ Print Styles ....................... L√≠nea ~715
 * 
 * ============================================================================
 * üé® VARIANTES DE ESTILO
 * ============================================================================
 * 
 * STROKE (default): outline con borde, fondo transparente
 * FILL: s√≥lido con fondo de color
 * TEXT: sin fondo ni borde, solo texto
 * 
 * ============================================================================
 * üéØ TIPOS DE COLOR
 * ============================================================================
 * 
 * primary, secondary, tertiary, error
 * 
 * ============================================================================
 * üì± ESTADOS
 * ============================================================================
 * 
 * default, hover, pressed, focus, loading, disabled, disabled-hover
 * 
 * ============================================================================
 * üé≠ POSICIONES DE ICONOS
 * ============================================================================
 * 
 * no-icon (default), icon-left, icon-right, icon-only
 * 
 * ============================================================================
 * üìè TAMA√ëOS
 * ============================================================================
 * 
 * small, medium (default), large
 * 
 * ============================================================================
 * üí° EJEMPLOS DE USO
 * ============================================================================
 * 
 * <!-- STROKE (default) -->
 * <button class="rb-button rb-button--primary">
 *   Primary Stroke
 * </button>
 * 
 * <!-- FILL -->
 * <button class="rb-button rb-button--primary rb-button--fill">
 *   Primary Fill
 * </button>
 * 
 * <!-- TEXT -->
 * <button class="rb-button rb-button--primary rb-button--text">
 *   Primary Text
 * </button>
 * 
 * <!-- Icon Left -->
 * <button class="rb-button rb-button--primary rb-button--icon-left">
 *   <svg>...</svg> Icon Left
 * </button>
 * 
 * <!-- Icon Right -->
 * <button class="rb-button rb-button--primary rb-button--icon-right">
 *   Icon Right <svg>...</svg>
 * </button>
 * 
 * <!-- Icon Only -->
 * <button class="rb-button rb-button--primary rb-button--icon-only">
 *   <svg>...</svg>
 * </button>
 * 
 * <!-- Loading -->
 * <button class="rb-button rb-button--primary rb-button--loading">
 *   Loading...
 * </button>
 * 
 * <!-- Disabled -->
 * <button class="rb-button rb-button--primary" disabled>
 *   Disabled
 * </button>
 * 
 * ============================================================================
 * üìä MATRIZ DE COMBINACIONES
 * ============================================================================
 * 
 * TIPOS (4):     primary, secondary, tertiary, error
 * ESTILOS (3):   stroke (default), fill, text
 * ICONOS (4):    no-icon (default), icon-left, icon-right, icon-only
 * ESTADOS (7):   default, hover, pressed, focus, loading, disabled, disabled-hover
 * TAMA√ëOS (3):   small, medium (default), large
 * 
 * TOTAL:         7 √ó 3 √ó 4 √ó 7 √ó 3 = 1,764 combinaciones posibles
 * 
 * ============================================================================
 */

/* ========================================
   LAYERS - Define prioridad de cascada
   ======================================== */

@layer reset, tokens, base, variants, style-variants, sizes, modifiers, icon-positions, states, utilities;

/* ========================================
   RESET LAYER
   ======================================== */

@layer reset {
  .rb-button {
    all: unset;
    box-sizing: border-box;
  }
}

/* ========================================
   TOKENS LAYER - Variables CSS
   DEFAULT = FILL (relleno s√≥lido)
   ======================================== */

@layer tokens {
  .rb-button {
    /* Colores BASE - FILL por defecto (relleno s√≥lido) */
    --rb-button-bg-color: var(--rb-color-secondary-base);
    --rb-button-bg-hover: var(--rb-color-secondary-D100);
    --rb-button-bg-active: var(--rb-color-secondary-D200);
    --rb-button-bg-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
    --rb-button-text-color: var(--rb-color-primary-D100);
    --rb-button-text-hover: var(--rb-color-primary-D100);
    --rb-button-text-active: var(--rb-color-primary-D100);
    --rb-button-text-disabled: var(--rb-color-grayscale-L100, #b9b9b9);
    --rb-button-border-color: var(--rb-color-secondary-base);
    --rb-button-border-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
    --rb-button-border-width: 1px;
    --rb-button-border-radius: clamp(1.5rem, 1.2rem + 1.5vw, 2.5rem);

    /* Espaciado - Fluido con clamp() */
    --rb-button-padding-inline: clamp(0.8rem, 0.5rem + 1.5vw, 2rem);
    --rb-button-padding-block: clamp(0.4rem, 0.3rem + 0.5vw, 0.875rem);
    --rb-button-gap: clamp(0.25rem, 0.2rem + 0.3vw, 0.5rem);

    /* Tipograf√≠a - Fluido con clamp() */
    --rb-button-font-family: var(--rb-typography-fontFamily, 'Roboto', sans-serif);
    --rb-button-font-size: clamp(0.875rem, 0.8rem + 0.3vw, 1rem);
    --rb-button-font-weight: 700;
    --rb-button-line-height: 1.2;

    /* Tama√±os - Logical properties */
    --rb-button-min-inline-size: clamp(80px, 15vw, 120px);
    --rb-button-min-block-size: clamp(36px, 8vw, 44px);

    /* Sombras */
    --rb-button-shadow: none;
    --rb-button-shadow-hover: none;
    --rb-button-shadow-active: none;
    --rb-button-shadow-pressed: inset 0px 2px 4px 0px rgba(0, 0, 0, 0.1);

    /* Transiciones - NO incluir outline para evitar destellos en focus */
    --rb-button-transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
  }
}

/* ========================================
   BASE LAYER - Estilos base
   ======================================== */

@layer base {
  .rb-button {
    /* Layout */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;

    /* Spacing - Logical Properties */
    padding-inline: var(--rb-button-padding-inline);
    padding-block: var(--rb-button-padding-block);
    gap: var(--rb-button-gap);

    /* Sizing - Logical Properties */
    min-inline-size: var(--rb-button-min-inline-size);
    min-block-size: var(--rb-button-min-block-size);
    inline-size: auto;

    /* Typography */
    font-family: var(--rb-button-font-family);
    font-style: normal;
    font-weight: var(--rb-button-font-weight);
    font-size: var(--rb-button-font-size);
    line-height: var(--rb-button-line-height);
    text-align: center;
    text-decoration: none;
    white-space: nowrap;

    /* Appearance - STROKE por defecto */
    background-color: var(--rb-button-bg-color);
    color: var(--rb-button-text-color);
    border: var(--rb-button-border-width) solid var(--rb-button-border-color);
    border-radius: var(--rb-button-border-radius);
    box-shadow: var(--rb-button-shadow);
    cursor: pointer;
    user-select: none;

    /* Animation */
    transition: var(--rb-button-transition);

    /* Nested Pseudo-classes - Estados interactivos */
    &:hover:not(:disabled):not(.rb-button--disabled) {
      background-color: var(--rb-button-bg-hover);
      color: var(--rb-button-text-hover, var(--rb-button-text-color));
      border-color: var(--rb-button-border-hover, var(--rb-button-border-color));
      box-shadow: var(--rb-button-shadow-hover);
      cursor: pointer;
    }

    &:active:not(:disabled):not(.rb-button--disabled) {
      background-color: var(--rb-button-bg-active);
      color: var(--rb-button-text-active, var(--rb-button-text-color));
      border-color: var(--rb-button-border-active, var(--rb-button-border-color));
      box-shadow: var(--rb-button-shadow-pressed, var(--rb-button-shadow-active));
      cursor: pointer;
    }

    &:focus-visible:not(:disabled):not(.rb-button--disabled) {
      outline: 3px solid var(--rb-color-secondary-L100);
      outline-offset: 2px;
      animation: rb-button-focus-pulse 0.3s ease-out;
    }

    &:disabled,
    &.rb-button--disabled {
      background-color: var(--rb-button-bg-disabled);
      color: var(--rb-button-text-disabled);
      border-color: var(--rb-button-border-disabled);
      cursor: not-allowed;
      box-shadow: none;
      outline: none;
    }

    /* Disabled hover - mantener los mismos colores disabled */
    &:disabled:hover,
    &.rb-button--disabled:hover {
      background-color: var(--rb-button-bg-disabled) !important;
      color: var(--rb-button-text-disabled) !important;
      border-color: var(--rb-button-border-disabled) !important;
      cursor: not-allowed;
      box-shadow: none;
      outline: none;
    }

    /* Disabled focus - sin outline */
    &:disabled:focus,
    &:disabled:focus-visible,
    &.rb-button--disabled:focus,
    &.rb-button--disabled:focus-visible {
      outline: none;
    }
  }
}

/* ========================================
   VARIANTS LAYER - Tipos de color
   ======================================== */

@layer variants {
  /* ============================================
     PRIMARY - Borde secondary, texto primary-D100 default, secondary en hover/active
     ============================================ */
  .rb-button--primary {
    /* Default state - texto/icono primary-D100, borde secondary-base, fondo blanco */
    --rb-button-bg-color: var(--rb-color-grayscale-white);
    --rb-button-text-color: var(--rb-color-primary-D100);
    --rb-button-border-color: var(--rb-color-secondary-base);
    --rb-button-border-width: 1px;
    
    /* Hover - texto/icono y borde secondary-D100, fondo secondary-L400 */
    --rb-button-text-hover: var(--rb-color-secondary-D100);
    --rb-button-border-hover: var(--rb-color-secondary-D100);
    --rb-button-bg-hover: var(--rb-color-secondary-L400);
    
    /* Active/Pressed - texto/icono y borde secondary-D200, fondo secondary-L300 */
    --rb-button-text-active: var(--rb-color-secondary-D200);
    --rb-button-border-active: var(--rb-color-secondary-D200);
    --rb-button-bg-active: var(--rb-color-secondary-L300);
    --rb-button-shadow-pressed: inset 2px 2px 3px 0px rgba(27, 27, 27, 0.16);
    
    /* Disabled - fondo blanco, borde y texto grayscale-base */
    --rb-button-bg-disabled: var(--rb-color-grayscale-white);
    --rb-button-text-disabled: var(--rb-color-grayscale-base);
    --rb-button-border-disabled: var(--rb-color-grayscale-base);
    
    /* Disabled Hover - fondo L300, borde L100, texto base (sin cambio) */
    &:disabled:hover,
    &.rb-button--disabled:hover {
      background-color: var(--rb-color-grayscale-L300) !important;
      border-color: var(--rb-color-grayscale-L100) !important;
      color: var(--rb-color-grayscale-base) !important;
    }
  }

  /* ============================================
     SECONDARY - Mismo patr√≥n: texto D100, borde base
     ============================================ */
  .rb-button--secondary {
    --rb-button-bg-color: var(--rb-color-grayscale-white);
    --rb-button-text-color: var(--rb-color-secondary-D100);
    --rb-button-border-color: var(--rb-color-secondary-base);
    --rb-button-border-width: 1px;
    --rb-button-text-hover: var(--rb-color-secondary-D100);
    --rb-button-border-hover: var(--rb-color-secondary-D100);
    --rb-button-bg-hover: var(--rb-color-secondary-L400);
    --rb-button-text-active: var(--rb-color-secondary-D200);
    --rb-button-border-active: var(--rb-color-secondary-D200);
    --rb-button-bg-active: var(--rb-color-secondary-L300);
    --rb-button-shadow-pressed: inset 2px 2px 3px 0px rgba(27, 27, 27, 0.16);
    --rb-button-bg-disabled: var(--rb-color-grayscale-white);
    --rb-button-text-disabled: var(--rb-color-grayscale-base);
    --rb-button-border-disabled: var(--rb-color-grayscale-base);
  }

  /* ============================================
     TERTIARY - Mismo patr√≥n
     ============================================ */
  .rb-button--tertiary {
    --rb-button-bg-color: var(--rb-color-grayscale-white);
    --rb-button-text-color: var(--rb-color-tertiary-D100);
    --rb-button-border-color: var(--rb-color-tertiary-base);
    --rb-button-border-width: 1px;
    --rb-button-text-hover: var(--rb-color-tertiary-D100);
    --rb-button-border-hover: var(--rb-color-tertiary-D100);
    --rb-button-bg-hover: var(--rb-color-tertiary-L400);
    --rb-button-text-active: var(--rb-color-tertiary-D200);
    --rb-button-border-active: var(--rb-color-tertiary-D200);
    --rb-button-bg-active: var(--rb-color-tertiary-L300);
    --rb-button-shadow-pressed: inset 2px 2px 3px 0px rgba(27, 27, 27, 0.16);
    --rb-button-bg-disabled: var(--rb-color-grayscale-white);
    --rb-button-text-disabled: var(--rb-color-grayscale-base);
    --rb-button-border-disabled: var(--rb-color-grayscale-base);
  }

  /* ============================================
     ERROR - Mismo patr√≥n
     ============================================ */
  .rb-button--error {
    --rb-button-bg-color: var(--rb-color-grayscale-white);
    --rb-button-text-color: var(--rb-color-feedback-error-D100, #c93241);
    --rb-button-border-color: var(--rb-color-feedback-error-base, #dc3545);
    --rb-button-border-width: 1px;
    --rb-button-text-hover: var(--rb-color-feedback-error-D100, #c93241);
    --rb-button-border-hover: var(--rb-color-feedback-error-D100, #c93241);
    --rb-button-bg-hover: var(--rb-color-feedback-error-L400, rgba(220, 53, 69, 0.08));
    --rb-button-text-active: var(--rb-color-feedback-error-D200, #b5303d);
    --rb-button-border-active: var(--rb-color-feedback-error-D200, #b5303d);
    --rb-button-bg-active: var(--rb-color-feedback-error-L300, rgba(220, 53, 69, 0.12));
    --rb-button-shadow-pressed: inset 2px 2px 3px 0px rgba(27, 27, 27, 0.16);
    --rb-button-bg-disabled: var(--rb-color-grayscale-white);
    --rb-button-text-disabled: var(--rb-color-grayscale-base);
    --rb-button-border-disabled: var(--rb-color-grayscale-base);
  }
}

/* ========================================
   STYLE-VARIANTS LAYER
   Variantes de estilo: stroke, fill, text
   ======================================== */

@layer style-variants {
  /* ============================================
     STROKE - Outline con borde (DEFAULT)
     Se puede usar expl√≠citamente o es el default
     ============================================ */
  .rb-button--stroke {
    /* Ya es el default, esta clase es opcional para claridad */
    --rb-button-bg-color: transparent;
  }

  /* ============================================
     FILL - S√≥lido con fondo de color
     ============================================ */
  .rb-button--fill {
    /* Estilos base para FILL (usa primary por defecto si no se especifica variante) */
    --rb-button-bg-color: var(--rb-color-primary-base);
    --rb-button-bg-hover: var(--rb-color-primary-D100);
    --rb-button-bg-active: var(--rb-color-primary-D200);
    --rb-button-bg-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
    --rb-button-text-color: var(--rb-color-grayscale-white, #fff);
    --rb-button-text-hover: var(--rb-color-grayscale-white, #fff);
    --rb-button-text-active: var(--rb-color-grayscale-white, #fff);
    --rb-button-border-color: var(--rb-color-primary-base);
    --rb-button-shadow-hover: var(--rb-shadow-s, 0 2px 4px rgb(0 0 0 / 10%));
    --rb-button-shadow-active: none;

    /* PRIMARY FILL - fondo secondary (amarillo), texto primary-D100 (verde) */
    &.rb-button--primary {
      --rb-button-bg-color: var(--rb-color-secondary-base);
      --rb-button-bg-hover: var(--rb-color-secondary-D100);
      --rb-button-bg-active: var(--rb-color-secondary-D200);
      --rb-button-bg-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-text-color: var(--rb-color-primary-D100);
      --rb-button-text-hover: var(--rb-color-primary-D100);
      --rb-button-text-active: var(--rb-color-primary-D100);
      --rb-button-text-disabled: var(--rb-color-grayscale-L100);
      --rb-button-border-color: var(--rb-color-secondary-base);
      --rb-button-border-hover: var(--rb-color-secondary-D100);
      --rb-button-border-active: var(--rb-color-secondary-D200);
      --rb-button-border-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-shadow-hover: var(--rb-shadow-s, 0 2px 4px rgb(0 0 0 / 10%));
      --rb-button-shadow-active: none;
    }

    /* SECONDARY FILL */
    &.rb-button--secondary {
      --rb-button-bg-color: var(--rb-color-secondary-base);
      --rb-button-bg-hover: var(--rb-color-secondary-D100);
      --rb-button-bg-active: var(--rb-color-secondary-D200);
      --rb-button-bg-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-text-color: var(--rb-color-primary-base);
      --rb-button-text-hover: var(--rb-color-primary-D100);
      --rb-button-text-active: var(--rb-color-primary-D200);
      --rb-button-text-disabled: var(--rb-color-grayscale-L100);
      --rb-button-border-color: var(--rb-color-secondary-base);
      --rb-button-border-hover: var(--rb-color-secondary-D100);
      --rb-button-border-active: var(--rb-color-secondary-D200);
      --rb-button-border-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-shadow-hover: var(--rb-shadow-s, 0 2px 4px rgb(0 0 0 / 10%));
      --rb-button-shadow-active: none;
    }

    /* TERTIARY FILL */
    &.rb-button--tertiary {
      --rb-button-bg-color: var(--rb-color-tertiary-base);
      --rb-button-bg-hover: var(--rb-color-tertiary-D100);
      --rb-button-bg-active: var(--rb-color-tertiary-D200);
      --rb-button-bg-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-text-color: var(--rb-color-grayscale-white, #fff);
      --rb-button-text-hover: var(--rb-color-grayscale-white, #fff);
      --rb-button-text-active: var(--rb-color-grayscale-white, #fff);
      --rb-button-text-disabled: var(--rb-color-grayscale-L100);
      --rb-button-border-color: var(--rb-color-tertiary-base);
      --rb-button-border-hover: var(--rb-color-tertiary-D100);
      --rb-button-border-active: var(--rb-color-tertiary-D200);
      --rb-button-border-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-shadow-hover: var(--rb-shadow-s, 0 2px 4px rgb(0 0 0 / 10%));
      --rb-button-shadow-active: none;
    }

    /* ERROR FILL */
    &.rb-button--error {
      --rb-button-bg-color: var(--rb-color-feedback-error-base, #dc3545);
      --rb-button-bg-hover: var(--rb-color-feedback-error-D100, #c93241);
      --rb-button-bg-active: var(--rb-color-feedback-error-D200, #b5303d);
      --rb-button-bg-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-text-color: var(--rb-color-grayscale-white, #fff);
      --rb-button-text-hover: var(--rb-color-grayscale-white, #fff);
      --rb-button-text-active: var(--rb-color-grayscale-white, #fff);
      --rb-button-text-disabled: var(--rb-color-grayscale-L100);
      --rb-button-border-color: var(--rb-color-feedback-error-base, #dc3545);
      --rb-button-border-hover: var(--rb-color-feedback-error-D100, #c93241);
      --rb-button-border-active: var(--rb-color-feedback-error-D200, #b5303d);
      --rb-button-border-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
      --rb-button-shadow-hover: var(--rb-shadow-s, 0 2px 4px rgb(0 0 0 / 10%));
      --rb-button-shadow-active: none;
    }
  }

  /* ============================================
     TEXT - Sin fondo ni borde
     ============================================ */
  .rb-button--text {
    /* Estilos base para TEXT (transparente) */
    --rb-button-bg-color: transparent;
    --rb-button-bg-hover: transparent;
    --rb-button-bg-active: transparent;
    --rb-button-bg-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
    --rb-button-border-color: transparent;
    --rb-button-border-hover: transparent;
    --rb-button-border-active: transparent;
    --rb-button-border-disabled: var(--rb-color-grayscale-L300, #f5f5f5);
    --rb-button-border-width: 0;
    --rb-button-padding-inline: clamp(0.4rem, 0.3rem + 0.5vw, 0.8rem);
    --rb-button-shadow: none;
    --rb-button-shadow-hover: none;
    --rb-button-shadow-active: none;
    
    /* Colores de texto por defecto (usa primary si no se especifica) */
    --rb-button-text-color: var(--rb-color-primary-base);
    --rb-button-text-hover: var(--rb-color-primary-D100);
    --rb-button-text-active: var(--rb-color-primary-D200);

    /* Underline sutil en hover */
    &:hover:not(:disabled) {
      text-decoration: underline;
      text-decoration-thickness: 2px;
      text-underline-offset: 4px;
    }

    /* PRIMARY TEXT */
    &.rb-button--primary {
      --rb-button-text-color: var(--rb-color-primary-base);
      --rb-button-text-hover: var(--rb-color-primary-D100);
      --rb-button-text-active: var(--rb-color-primary-D200);
    }

    /* SECONDARY TEXT */
    &.rb-button--secondary {
      --rb-button-text-color: var(--rb-color-secondary-base);
      --rb-button-text-hover: var(--rb-color-secondary-D100);
      --rb-button-text-active: var(--rb-color-secondary-D200);
    }

    /* TERTIARY TEXT */
    &.rb-button--tertiary {
      --rb-button-text-color: var(--rb-color-tertiary-base);
      --rb-button-text-hover: var(--rb-color-tertiary-D100);
      --rb-button-text-active: var(--rb-color-tertiary-D200);
    }

    /* ERROR TEXT */
    &.rb-button--error {
      --rb-button-text-color: var(--rb-color-feedback-error-base, #dc3545);
      --rb-button-text-hover: var(--rb-color-feedback-error-D100, #c93241);
      --rb-button-text-active: var(--rb-color-feedback-error-D200, #b5303d);
    }
  }
}

/* ========================================
   SIZES LAYER
   ======================================== */

@layer sizes {
  .rb-button--small {
    --rb-button-padding-inline: clamp(0.5rem, 0.3rem + 0.8vw, 1rem);
    --rb-button-padding-block: clamp(0.25rem, 0.2rem + 0.3vw, 0.5rem);
    --rb-button-font-size: clamp(0.75rem, 0.7rem + 0.2vw, 0.875rem);
    --rb-button-min-inline-size: clamp(60px, 12vw, 100px);
    --rb-button-min-block-size: clamp(28px, 6vw, 36px);
    --rb-button-gap: clamp(0.2rem, 0.15rem + 0.2vw, 0.4rem);
  }

  .rb-button--medium {
    /* Default - ya definido en tokens */
  }

  .rb-button--large {
    --rb-button-padding-inline: clamp(1.2rem, 0.8rem + 2vw, 2.5rem);
    --rb-button-padding-block: clamp(0.5rem, 0.4rem + 0.8vw, 1.125rem);
    --rb-button-font-size: clamp(1rem, 0.9rem + 0.4vw, 1.25rem);
    --rb-button-min-inline-size: clamp(100px, 18vw, 140px);
    --rb-button-min-block-size: clamp(44px, 10vw, 56px);
    --rb-button-gap: clamp(0.3rem, 0.25rem + 0.4vw, 0.6rem);
  }
}

/* ========================================
   MODIFIERS LAYER
   ======================================== */

@layer modifiers {
  /* Square corners - esquinas menos redondeadas */
  .rb-button--square {
    --rb-button-border-radius: clamp(6px, 0.4rem + 0.3vw, 10px);
  }

  /* Block (full width) */
  .rb-button--block {
    display: flex;
    inline-size: 100%;
  }
}

/* ========================================
   ICON-POSITIONS LAYER
   Posiciones de iconos en el bot√≥n
   ======================================== */

@layer icon-positions {
  /* Icon Left - icono a la izquierda del texto */
  .rb-button--icon-left {
    flex-direction: row;

    /* SVG/Icon styles - tama√±o responsive 18px base */
    & > svg:first-child,
    & > i:first-child,
    & > span:first-child,
    & > [class*='icon']:first-child {
      margin-inline-end: var(--rb-button-gap);
      inline-size: clamp(16px, 1.125rem, 20px);
      block-size: clamp(16px, 1.125rem, 20px);
      flex-shrink: 0;
      opacity: 1;
    }
  }

  /* Icon Right - icono a la derecha del texto */
  .rb-button--icon-right {
    flex-direction: row;

    /* SVG/Icon styles - tama√±o responsive 18px base */
    & > svg:last-child,
    & > i:last-child,
    & > span:last-child,
    & > [class*='icon']:last-child {
      margin-inline-start: var(--rb-button-gap);
      inline-size: clamp(16px, 1.125rem, 20px);
      block-size: clamp(16px, 1.125rem, 20px);
      flex-shrink: 0;
      opacity: 1;
    }
  }

  /* Icon Only - solo icono, sin texto, completamente redondo
     Estructura: icono 18px + padding 11px = 40x40px total circular */
  .rb-button--icon-only {
    --rb-button-padding-inline: 11px;
    --rb-button-padding-block: 11px;
    --rb-button-min-inline-size: 40px;
    --rb-button-border-radius: 50%; /* Completamente redondo */

    /* Forzar tama√±o exacto 40x40px */
    inline-size: 40px !important;
    block-size: 40px !important;
    min-inline-size: 40px !important;
    max-inline-size: 40px !important;
    min-block-size: 40px !important;
    max-block-size: 40px !important;
    
    /* Asegurar que el padding no afecte el tama√±o total */
    padding-inline: 11px !important;
    padding-block: 11px !important;
    box-sizing: border-box !important;
    border-radius: 50% !important; /* Siempre circular */

    /* SVG/Icon styles - 18px por defecto */
    & > svg,
    & > i,
    & > span,
    & > [class*='icon'] {
      inline-size: 18px;
      block-size: 18px;
      flex-shrink: 0;
      opacity: 1;
    }

    /* Small size: 32x32 (icono 14px + padding 9px) */
    &.rb-button--small {
      --rb-button-padding-inline: 9px;
      --rb-button-padding-block: 9px;
      
      inline-size: 32px !important;
      block-size: 32px !important;
      min-inline-size: 32px !important;
      max-inline-size: 32px !important;
      min-block-size: 32px !important;
      max-block-size: 32px !important;
      padding-inline: 9px !important;
      padding-block: 9px !important;

      & > svg,
      & > i,
      & > span,
      & > [class*='icon'] {
        inline-size: 14px;
        block-size: 14px;
      }
    }

    /* Large size: 48x48 (icono 22px + padding 13px) */
    &.rb-button--large {
      --rb-button-padding-inline: 13px;
      --rb-button-padding-block: 13px;
      
      inline-size: 48px !important;
      block-size: 48px !important;
      min-inline-size: 48px !important;
      max-inline-size: 48px !important;
      min-block-size: 48px !important;
      max-block-size: 48px !important;
      padding-inline: 13px !important;
      padding-block: 13px !important;

      & > svg,
      & > i,
      & > span,
      & > [class*='icon'] {
        inline-size: 22px;
        block-size: 22px;
      }
    }
  }
}

/* ========================================
   STATES LAYER
   ======================================== */

@layer states {
  /* ============================================
     LOADING STATE
     ============================================ */
  .rb-button--loading {
    --rb-button-loading-animation-duration: 0.6s;
    --rb-button-loading-spinner-size: clamp(14px, 3vw, 18px);

    pointer-events: none;
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: var(--rb-button-gap);

    /* Ocultar iconos cuando est√° en loading - reemplazar por spinner */
    & > svg,
    & > i,
    & > span,
    & > [class*='icon'] {
      display: none !important; /* Remover completamente el icono */
    }

    /* Loading con icono a la izquierda (default o icon-left) */
    &:not(.rb-button--icon-right):not(.rb-button--icon-only)::before,
    &.rb-button--icon-left::before {
      content: '';
      inline-size: var(--rb-button-loading-spinner-size);
      block-size: var(--rb-button-loading-spinner-size);
      border: 2px solid currentcolor;
      border-radius: 50%;
      border-top-color: transparent;
      animation: rb-button-spinner var(--rb-button-loading-animation-duration) linear infinite;
      flex-shrink: 0;
      margin-inline-end: var(--rb-button-gap);
    }

    /* Loading con icono a la derecha (icon-right) */
    &.rb-button--icon-right::after {
      content: '';
      inline-size: var(--rb-button-loading-spinner-size);
      block-size: var(--rb-button-loading-spinner-size);
      border: 2px solid currentcolor;
      border-radius: 50%;
      border-top-color: transparent;
      animation: rb-button-spinner var(--rb-button-loading-animation-duration) linear infinite;
      flex-shrink: 0;
      margin-inline-start: var(--rb-button-gap);
    }

    /* Loading solo icono (icon-only) - spinner centrado absolutamente */
    &.rb-button--icon-only {
      /* Remover el icono completamente */
      & > svg,
      & > i,
      & > span,
      & > [class*='icon'] {
        display: none !important;
      }

      &::after {
        content: '';
        position: absolute;
        inline-size: var(--rb-button-loading-spinner-size);
        block-size: var(--rb-button-loading-spinner-size);
        inset-block-start: 50%;
        inset-inline-start: 50%;
        margin-inline-start: calc(var(--rb-button-loading-spinner-size) / -2);
        margin-block-start: calc(var(--rb-button-loading-spinner-size) / -2);
        border: 2px solid currentcolor;
        border-radius: 50%;
        border-top-color: transparent;
        animation: rb-button-spinner var(--rb-button-loading-animation-duration) linear infinite;
        z-index: 2;
      }
    }
  }

  /* Spinner colors por variante de estilo */

  /* STROKE y TEXT - spinner color del texto */
  .rb-button--loading:not(.rb-button--fill)::before,
  .rb-button--loading:not(.rb-button--fill)::after {
    border-color: currentcolor;
    border-top-color: transparent;
  }

  /* FILL PRIMARY, TERTIARY, ERROR - spinner color primary-D100 (verde oscuro) */
  .rb-button--fill.rb-button--primary.rb-button--loading::before,
  .rb-button--fill.rb-button--primary.rb-button--loading::after,
  .rb-button--fill.rb-button--tertiary.rb-button--loading::before,
  .rb-button--fill.rb-button--tertiary.rb-button--loading::after,
  .rb-button--fill.rb-button--error.rb-button--loading::before,
  .rb-button--fill.rb-button--error.rb-button--loading::after {
    border-color: var(--rb-color-primary-D100, black);
    border-top-color: transparent;
  }

  /* FILL SECONDARY - spinner color primary-base */
  .rb-button--fill.rb-button--secondary.rb-button--loading::before,
  .rb-button--fill.rb-button--secondary.rb-button--loading::after {
    border-color: var(--rb-color-primary-base);
    border-top-color: transparent;
  }

  /* Disabled spinner - usar color grayscale */
  .rb-button:disabled.rb-button--loading::before,
  .rb-button:disabled.rb-button--loading::after,
  .rb-button.rb-button--disabled.rb-button--loading::before,
  .rb-button.rb-button--disabled.rb-button--loading::after {
    border-color: var(--rb-color-grayscale-base, #9b9b9b);
    border-top-color: transparent;
  }
}

/* ========================================
   ANIMATIONS
   ======================================== */

@keyframes rb-button-spinner {
  to {
    transform: rotate(360deg);
  }
}

/* Animaci√≥n sutil de focus - aparece con un peque√±o pulse */
@keyframes rb-button-focus-pulse {
  0% {
    outline-width: 0px;
    outline-offset: 0px;
  }
  50% {
    outline-offset: 3px;
  }
  100% {
    outline-width: 3px;
    outline-offset: 2px;
  }
}

/* ========================================
   UTILITIES LAYER (m√°xima prioridad)
   ======================================== */

@layer utilities {
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .rb-button {
      --rb-button-border-width: 3px;
    }

    .rb-button--text {
      text-decoration: underline;
      text-decoration-thickness: 2px;
      text-underline-offset: 4px;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .rb-button {
      --rb-button-transition: none;
    }

    .rb-button--loading::before,
    .rb-button--loading::after {
      animation: none;
    }
  }

  /* Mobile - Full width by default (excepto icon-only y circle) */
  @media (inline-size <= 640px) {
    .rb-button:not(.rb-button--icon-only):not(.rb-button--circle) {
      inline-size: 100%;
    }
  }

  /* Desktop - Auto width */
  @media (inline-size >= 641px) {
    .rb-button:not(.rb-button--block) {
      inline-size: auto;
    }
  }

  /* Print styles */
  @media print {
    .rb-button {
      background: transparent;
      color: black;
      border: 1px solid black;
      box-shadow: none;
    }
  }
}
