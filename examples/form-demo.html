<!doctype html>
<html lang="es" data-brand="seguros-bolivar" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Seguros Bolivar UI Design System</title>

    <!-- Font Awesome 6 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Complete Seguros Bolívar Bundle -->
    <link rel="stylesheet" href="dist/sb-ui-seguros-bolivar-light.min.css" id="brand-css" />

    <style>
      /* ============================================
         BOLIVAR FONT FAMILY
         ============================================ */
      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-Light.woff2') format('woff2');
        font-weight: 200;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-Light-Italic.woff2') format('woff2');
        font-weight: 200;
        font-style: italic;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-Italic.woff2') format('woff2');
        font-weight: 400;
        font-style: italic;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-SemiBold.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-SemiBold-Italic.woff2') format('woff2');
        font-weight: 500;
        font-style: italic;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-Bold.woff2') format('woff2');
        font-weight: 600;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-Bold-Italic.woff2') format('woff2');
        font-weight: 600;
        font-style: italic;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-ExtraBold.woff2') format('woff2');
        font-weight: 700;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: 'Bolivar';
        src: url('assets/fonts/bolivar/Bolivar-ExtraBold-Italic.woff2') format('woff2');
        font-weight: 700;
        font-style: italic;
        font-display: swap;
      }

      /* ============================================
         GLOBAL STYLES
         ============================================ */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body,
      h1,
      h2,
      h3,
      p {
        margin-block: 0;
        margin-inline: 0;
        padding-block: 0;
        padding-inline: 0;
      }

      body {
        font-family: 'Bolivar', sans-serif;
        padding: 2rem;
        background: #fafafa;
        min-block-size: 100vh;
        margin: 0;
      }

      /* Forzar Bolivar en todos los componentes */
      .sb-ui-checkbox {
        --sb-ui-checkbox-font-family: 'Bolivar', sans-serif;
      }

      .demo-container {
        max-width: 1000px;
        margin: 0 auto;
      }

      /* Hero Section */
      .hero {
        padding: 3rem;
        background: linear-gradient(
          135deg,
          var(--sb-ui-color-primary-L400) 0%,
          var(--sb-ui-color-secondary-L400) 100%
        );
        border-radius: 16px;
        margin-bottom: 3rem;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .hero h1 {
        color: var(--sb-ui-color-primary-D200, #027343);
        margin: 0;
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 700;
      }

      /* Brand controls */
      .brand-controls {
        background: white;
        padding-block: 1rem;
        padding-inline: 1.5rem;
        border-radius: 12px;
        margin-block-end: 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .brand-controls-group {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .brand-controls label {
        font-weight: 600;
        color: var(--sb-ui-color-grayscale-dark, #333);
        font-size: 0.875rem;
      }

      #brandSelect {
        padding-block: 0.5rem;
        padding-inline-start: 1rem;
        padding-inline-end: 2.5rem;
        border: 2px solid var(--sb-ui-color-grayscale-L200, #e0e0e0);
        border-radius: 8px;
        background: white;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
      }

      #brandSelect:hover {
        border-color: var(--sb-ui-color-primary-base, #038450);
      }

      #brandSelect:focus {
        outline: none;
        border-color: var(--sb-ui-color-primary-base, #038450);
        box-shadow: 0 0 0 3px var(--sb-ui-color-primary-L400, rgba(3, 132, 80, 0.1));
      }

      .theme-toggle {
        display: flex;
        gap: 0.5rem;
      }

      /* Form card */
      .form-card {
        background: white;
        padding-block: clamp(1.5rem, 2vw, 2.5rem);
        padding-inline: clamp(1.5rem, 3vw, 3rem);
        border-radius: 16px;
        box-shadow:
          0 4px 6px rgba(0, 0, 0, 0.07),
          0 2px 4px rgba(0, 0, 0, 0.05);
        margin-block-end: 2rem;
        border: 1px solid var(--sb-ui-color-grayscale-L200, #f0f0f0);
      }

      /* Form sections */
      .form-section {
        margin-block-end: 2.5rem;
      }

      .form-section:last-child {
        margin-block-end: 0;
      }

      .form-section-title {
        font-size: clamp(1.25rem, 2.5vw, 1.5rem);
        color: var(--sb-ui-color-primary-base, #038450);
        margin-block-start: 0;
        margin-block-end: 1.5rem;
        padding-block-end: 0.75rem;
        border-block-end: 2px solid var(--sb-ui-color-grayscale-L200, #e0e0e0);
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-weight: 600;
      }

      .form-section-title i {
        color: inherit; /* Mismo color que el texto del título */
        font-size: 1.5rem;
      }

      /* Form rows (2 columnas) */
      .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
      }

      /* Radio y Checkbox groups */
      .radio-group,
      .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      /* Form actions */
      .form-actions {
        display: flex;
        gap: 1rem;
        justify-content: space-between;
        margin-block-start: 2rem;
        padding-block-start: 2rem;
        border-block-start: 1px solid var(--sb-ui-color-grayscale-L200, #e0e0e0);
        flex-wrap: wrap;
      }

      .form-actions button {
        min-inline-size: 150px;
      }

      .form-actions-right {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
      }

      /* Botones con font-weight normal */
      .sb-ui-button {
        font-weight: 500 !important;
      }

      /* Transiciones suaves */
      .sb-ui-input,
      .sb-ui-textarea,
      #brandSelect {
        transition:
          border-color 0.3s ease,
          box-shadow 0.3s ease;
      }

      .sb-ui-input-helper,
      .sb-ui-textarea-helper {
        transition: color 0.3s ease;
      }

      /* Modals base */
      .loading-overlay,
      .success-modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        place-items: center;
        backdrop-filter: blur(4px);
      }

      .loading-overlay {
        z-index: 9999;
      }

      .success-modal {
        z-index: 10000;
      }

      .loading-overlay.active,
      .success-modal.active {
        display: grid;
      }

      .loading-content,
      .success-modal-content {
        background: white;
        padding-inline: 3rem;
        border-radius: 16px;
        text-align: center;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      }

      .loading-content {
        padding-block: 2rem;
      }

      .loading-content p {
        margin-block-start: 1rem;
        color: var(--sb-ui-color-grayscale-dark, #333);
        font-weight: 600;
      }

      .success-modal-content {
        padding-block: 3rem;
        max-inline-size: 500px;
      }

      .success-icon {
        font-size: 4rem;
        color: var(--sb-ui-color-feedback-success-base, #38a169);
        margin-block-end: 1rem;
      }

      .success-modal-content h2 {
        font-size: 1.5rem;
        color: var(--sb-ui-color-primary-base, #038450);
        margin-block-end: 1rem;
      }

      .success-modal-content p {
        color: var(--sb-ui-color-grayscale-base, #666);
        margin-block-end: 2rem;
      }

      /* Estados de validación */
      .sb-ui-input--error,
      .sb-ui-textarea--error {
        border-color: var(--sb-ui-color-feedback-error-base, #e53e3e) !important;
      }

      .sb-ui-input--success,
      .sb-ui-textarea--success {
        border-color: var(--sb-ui-color-feedback-success-base, #38a169) !important;
      }

      .sb-ui-input-helper--error {
        color: var(--sb-ui-color-feedback-error-base, #e53e3e) !important;
      }

      .sb-ui-input-helper--success {
        color: var(--sb-ui-color-feedback-success-base, #38a169) !important;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .form-actions {
          flex-direction: column;
        }

        .form-actions button {
          inline-size: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="demo-container">
      <!-- Brand & Theme Controls -->
      <div class="brand-controls">
        <button
          onclick="window.location.href='index.html'"
          class="sb-ui-button sb-ui-button--tertiary sb-ui-button--small"
        >
          ← Volver
        </button>

        <div class="brand-controls-group">
          <label for="brandSelect">📦 Marca:</label>
          <select id="brandSelect">
            <option value="white-label">White Label</option>
            <option value="jelpit">Jelpit</option>
            <option value="davivienda">Davivienda</option>
            <option value="cien-cuadras">Cien Cuadras</option>
            <option value="doctor-aki">Doctor Aki</option>
            <option value="seguros-bolivar" selected>Seguros Bolívar</option>
          </select>

          <label for="themeToggle">🌓 Tema:</label>
          <div class="theme-toggle">
            <button id="lightBtn" class="sb-ui-button sb-ui-button--primary sb-ui-button--small">
              ☀️ Light
            </button>
            <button id="darkBtn" class="sb-ui-button sb-ui-button--tertiary sb-ui-button--small">
              🌙 Dark
            </button>
          </div>
        </div>
      </div>

      <!-- Form -->
      <form id="registrationForm" class="form-card">
        <!-- Sección 1: Información Personal -->
        <div class="form-section">
          <h3 class="form-section-title">
            <i class="fa-solid fa-user"></i>
            Información Personal
          </h3>

          <div class="form-row">
            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--required" for="firstName">
                Nombre
              </label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                class="sb-ui-input"
                placeholder="Ingrese su nombre"
                required
                autofocus
                aria-describedby="firstNameHelper"
                aria-required="true"
                aria-invalid="false"
                autocomplete="given-name"
              />
              <span
                class="sb-ui-input-helper"
                id="firstNameHelper"
                role="status"
                aria-live="polite"
              >
                <i class="fa-solid fa-circle-info"></i>
                Mínimo 2 caracteres
              </span>
            </div>

            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--required" for="lastName">
                Apellido
              </label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                class="sb-ui-input"
                placeholder="Ingrese su apellido"
                required
                aria-describedby="lastNameHelper"
                aria-required="true"
                aria-invalid="false"
                autocomplete="family-name"
              />
              <span class="sb-ui-input-helper" id="lastNameHelper" role="status" aria-live="polite">
                <i class="fa-solid fa-circle-info"></i>
                Mínimo 2 caracteres
              </span>
            </div>
          </div>

          <div class="form-row">
            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--required" for="email">
                Email
              </label>
              <input
                type="email"
                id="email"
                name="email"
                class="sb-ui-input"
                placeholder="ejemplo@email.com"
                required
                aria-describedby="emailHelper"
                aria-required="true"
                aria-invalid="false"
                autocomplete="email"
              />
              <span class="sb-ui-input-helper" id="emailHelper" role="status" aria-live="polite">
                <i class="fa-solid fa-circle-info"></i>
                Usaremos este email para contactarlo
              </span>
            </div>

            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--required" for="phone">
                Teléfono
              </label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="sb-ui-input"
                placeholder="+57 300 123 4567"
                required
                aria-describedby="phoneHelper"
                aria-required="true"
                aria-invalid="false"
                autocomplete="tel"
              />
              <span class="sb-ui-input-helper" id="phoneHelper" role="status" aria-live="polite">
                <i class="fa-solid fa-circle-info"></i>
                Formato: +57 XXX XXX XXXX
              </span>
            </div>
          </div>

          <div class="form-row">
            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--required" for="password">
                Contraseña
              </label>
              <input
                type="password"
                id="password"
                name="password"
                class="sb-ui-input"
                placeholder="••••••••"
                required
                aria-describedby="passwordHelper"
                aria-required="true"
                aria-invalid="false"
                autocomplete="new-password"
              />
              <span class="sb-ui-input-helper" id="passwordHelper" role="status" aria-live="polite">
                <i class="fa-solid fa-circle-info"></i>
                Mínimo 8 caracteres, 1 mayúscula, 1 número
              </span>
            </div>

            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--required" for="confirmPassword">
                Confirmar Contraseña
              </label>
              <input
                type="password"
                id="confirmPassword"
                name="confirmPassword"
                class="sb-ui-input"
                placeholder="••••••••"
                required
                aria-describedby="confirmPasswordHelper"
                aria-required="true"
                aria-invalid="false"
                autocomplete="new-password"
              />
              <span
                class="sb-ui-input-helper"
                id="confirmPasswordHelper"
                role="status"
                aria-live="polite"
              >
                <i class="fa-solid fa-circle-info"></i>
                Debe coincidir con la contraseña
              </span>
            </div>
          </div>
        </div>

        <!-- Sección 2: Información Adicional -->
        <div class="form-section">
          <h3 class="form-section-title">
            <i class="fa-solid fa-circle-info"></i>
            Información Adicional
          </h3>

          <div class="sb-ui-input-container">
            <label class="sb-ui-input-label sb-ui-input-label--optional" for="company">
              Empresa
            </label>
            <input
              type="text"
              id="company"
              name="company"
              class="sb-ui-input"
              placeholder="Nombre de la empresa"
            />
            <span class="sb-ui-input-helper">
              <i class="fa-solid fa-circle-info"></i>
              Opcional
            </span>
          </div>

          <div class="sb-ui-textarea-container">
            <label class="sb-ui-textarea-label sb-ui-textarea-label--optional" for="comments">
              Comentarios
            </label>
            <textarea
              id="comments"
              name="comments"
              class="sb-ui-textarea"
              placeholder="Cuéntanos un poco sobre ti..."
              rows="4"
            ></textarea>
            <span class="sb-ui-textarea-helper">
              <i class="fa-solid fa-circle-info"></i>
              Máximo 500 caracteres
            </span>
          </div>
        </div>

        <!-- Sección 3: Preferencias -->
        <div class="form-section">
          <h3 class="form-section-title">
            <i class="fa-solid fa-sliders"></i>
            Preferencias
          </h3>

          <!-- Tipo de Cuenta e Intereses en 2 columnas -->
          <div class="form-row">
            <!-- Radio Buttons: Tipo de Cuenta -->
            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--required"> Tipo de Cuenta </label>
              <div class="radio-group">
                <label class="sb-ui-radio">
                  <input
                    type="radio"
                    name="accountType"
                    value="personal"
                    class="sb-ui-radio__input"
                    required
                    checked
                  />
                  <span class="sb-ui-radio__circle"></span>
                  <span class="sb-ui-radio__label">Personal</span>
                </label>

                <label class="sb-ui-radio">
                  <input
                    type="radio"
                    name="accountType"
                    value="business"
                    class="sb-ui-radio__input"
                  />
                  <span class="sb-ui-radio__circle"></span>
                  <span class="sb-ui-radio__label">Empresa</span>
                </label>
              </div>
            </div>

            <!-- Checkboxes: Intereses -->
            <div class="sb-ui-input-container">
              <label class="sb-ui-input-label sb-ui-input-label--optional"> Intereses </label>
              <div class="checkbox-group">
                <label class="sb-ui-checkbox">
                  <input
                    type="checkbox"
                    name="interests"
                    value="insurance"
                    class="sb-ui-checkbox__input"
                  />
                  <span class="sb-ui-checkbox__box"></span>
                  <span class="sb-ui-checkbox__label">Seguros</span>
                </label>

                <label class="sb-ui-checkbox">
                  <input
                    type="checkbox"
                    name="interests"
                    value="savings"
                    class="sb-ui-checkbox__input"
                  />
                  <span class="sb-ui-checkbox__box"></span>
                  <span class="sb-ui-checkbox__label">Ahorro</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Checkbox: Términos y Condiciones (ancho completo) -->
          <div class="sb-ui-input-container">
            <label class="sb-ui-checkbox">
              <input type="checkbox" name="terms" class="sb-ui-checkbox__input" required />
              <span class="sb-ui-checkbox__box"></span>
              <span class="sb-ui-checkbox__label">
                Acepto los
                <a
                  href="#"
                  style="
                    color: var(--sb-ui-color-primary-base, #038450);
                    text-decoration: underline;
                  "
                >
                  términos y condiciones
                </a>
                <span style="color: var(--sb-ui-color-feedback-error-base, #e53e3e)">*</span>
              </span>
            </label>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button type="button" class="sb-ui-button sb-ui-button--tertiary" id="fillBtn">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
            Llenar Demo
          </button>
          <div class="form-actions-right">
            <button type="button" class="sb-ui-button sb-ui-button--secondary" id="resetBtn">
              <i class="fa-solid fa-rotate-left"></i>
              Limpiar
            </button>
            <button type="submit" class="sb-ui-button sb-ui-button--primary sb-ui-button--fill">
              <i class="fa-solid fa-paper-plane"></i>
              Enviar Registro
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="sb-ui-spinner sb-ui-spinner sb-ui-spinner--fast"></div>
        <p>Enviando formulario...</p>
      </div>
    </div>

    <!-- Success Modal -->
    <div class="success-modal" id="successModal">
      <div class="success-modal-content">
        <div class="success-icon">
          <i class="fa-solid fa-circle-check"></i>
        </div>
        <h2>¡Registro Exitoso!</h2>
        <p>
          Tu formulario ha sido enviado correctamente. Recibirás un email de confirmación pronto.
        </p>
        <button class="sb-ui-button sb-ui-button--primary sb-ui-button--fill" id="closeModalBtn">
          Cerrar
        </button>
      </div>
    </div>

    <script>
      // ==============================================
      // BRAND & THEME SWITCHER
      // ==============================================
      const brandSelect = document.getElementById('brandSelect');
      const lightBtn = document.getElementById('lightBtn');
      const darkBtn = document.getElementById('darkBtn');
      const linkElement = document.querySelector('link[id="brand-css"]');
      const html = document.documentElement;

      let currentBrand = 'seguros-bolivar';
      let currentTheme = 'light';

      function updateStylesheet() {
        linkElement.href = `dist/sb-ui-${currentBrand}-${currentTheme}.min.css`;
        html.setAttribute('data-brand', currentBrand);
        html.setAttribute('data-theme', currentTheme);

        // Update button states
        if (currentTheme === 'light') {
          lightBtn.classList.remove('sb-ui-button--tertiary');
          lightBtn.classList.add('sb-ui-button--primary');
          darkBtn.classList.remove('sb-ui-button--primary');
          darkBtn.classList.add('sb-ui-button--tertiary');
        } else {
          darkBtn.classList.remove('sb-ui-button--tertiary');
          darkBtn.classList.add('sb-ui-button--primary');
          lightBtn.classList.remove('sb-ui-button--primary');
          lightBtn.classList.add('sb-ui-button--tertiary');
        }
      }

      brandSelect.addEventListener('change', (e) => {
        currentBrand = e.target.value;
        updateStylesheet();
      });

      lightBtn.addEventListener('click', () => {
        currentTheme = 'light';
        updateStylesheet();
      });

      darkBtn.addEventListener('click', () => {
        currentTheme = 'dark';
        updateStylesheet();
      });

      // ==============================================
      // FORM VALIDATION
      // ==============================================
      const form = document.getElementById('registrationForm');
      const loadingOverlay = document.getElementById('loadingOverlay');
      const successModal = document.getElementById('successModal');
      const closeModalBtn = document.getElementById('closeModalBtn');
      const resetBtn = document.getElementById('resetBtn');

      // Helper functions
      function setInputState(input, helper, isValid, message) {
        if (isValid) {
          input.classList.remove('sb-ui-input--error', 'sb-ui-textarea--error');
          input.classList.add('sb-ui-input--success', 'sb-ui-textarea--success');
          helper.classList.remove('sb-ui-input-helper--error', 'sb-ui-textarea-helper--error');
          helper.classList.add('sb-ui-input-helper--success', 'sb-ui-textarea-helper--success');
          helper.innerHTML = `<i class="fa-solid fa-circle-check"></i>${message}`;
        } else {
          input.classList.remove('sb-ui-input--success', 'sb-ui-textarea--success');
          input.classList.add('sb-ui-input--error', 'sb-ui-textarea--error');
          helper.classList.remove('sb-ui-input-helper--success', 'sb-ui-textarea-helper--success');
          helper.classList.add('sb-ui-input-helper--error', 'sb-ui-textarea-helper--error');
          helper.innerHTML = `<i class="fa-solid fa-circle-xmark"></i>${message}`;
        }
      }

      function resetInputState(input, helper, defaultMessage) {
        input.classList.remove(
          'sb-ui-input--error',
          'sb-ui-input--success',
          'sb-ui-textarea--error',
          'sb-ui-textarea--success'
        );
        helper.classList.remove(
          'sb-ui-input-helper--error',
          'sb-ui-input-helper--success',
          'sb-ui-textarea-helper--error',
          'sb-ui-textarea-helper--success'
        );
        helper.innerHTML = `<i class="fa-solid fa-circle-info"></i>${defaultMessage}`;
      }

      // Validation functions
      function validateName(value) {
        return value.trim().length >= 2;
      }

      function validateEmail(value) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(value);
      }

      function validatePhone(value) {
        const re = /^\+?\d{10,}$/;
        return re.test(value.replace(/\s/g, ''));
      }

      function validatePassword(value) {
        // Mínimo 8 caracteres, 1 mayúscula, 1 número
        const re = /^(?=.*[A-Z])(?=.*\d).{8,}$/;
        return re.test(value);
      }

      // Debounce utility
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // ==============================================
      // CONFIGURATION CONSTANTS
      // ==============================================
      const CONFIG = {
        loadingDelay: 2000,
        validationDelay: 300,
        demoData: {
          firstName: 'Jhon',
          lastName: 'Moofarrif',
          email: 'jhon.moofarrif@segurosbolivar.com',
          phone: '+57 300 123 4567',
          password: 'Password123',
          company: 'Seguros Bolívar',
          comments: 'Este es un comentario de prueba para el formulario de registro.',
          accountType: 'business',
          interests: ['insurance'],
        },
      };

      // ==============================================
      // VALIDATION SETUP (DRY)
      // ==============================================
      const validators = {
        firstName: {
          element: document.getElementById('firstName'),
          helper: document.getElementById('firstNameHelper'),
          validate: validateName,
          messages: {
            empty: 'Mínimo 2 caracteres',
            success: 'Correcto',
            error: 'Mínimo 2 caracteres',
          },
        },
        lastName: {
          element: document.getElementById('lastName'),
          helper: document.getElementById('lastNameHelper'),
          validate: validateName,
          messages: {
            empty: 'Mínimo 2 caracteres',
            success: 'Correcto',
            error: 'Mínimo 2 caracteres',
          },
        },
        email: {
          element: document.getElementById('email'),
          helper: document.getElementById('emailHelper'),
          validate: validateEmail,
          messages: {
            empty: 'Usaremos este email para contactarlo',
            success: 'Email válido',
            error: 'Email inválido',
          },
        },
        phone: {
          element: document.getElementById('phone'),
          helper: document.getElementById('phoneHelper'),
          validate: validatePhone,
          messages: {
            empty: 'Formato: +57 XXX XXX XXXX',
            success: 'Teléfono válido',
            error: 'Teléfono inválido (mín. 10 dígitos)',
          },
        },
        password: {
          element: document.getElementById('password'),
          helper: document.getElementById('passwordHelper'),
          validate: validatePassword,
          messages: {
            empty: 'Mínimo 8 caracteres, 1 mayúscula, 1 número',
            success: 'Contraseña segura',
            error: 'Mínimo 8 caracteres, 1 mayúscula, 1 número',
          },
        },
      };

      // Setup validation listeners with debounce
      Object.entries(validators).forEach(([fieldName, config]) => {
        const validateInput = debounce((e) => {
          const value = e.target.value;
          if (value.length === 0) {
            resetInputState(config.element, config.helper, config.messages.empty);
          } else if (config.validate(value)) {
            setInputState(config.element, config.helper, true, config.messages.success);
          } else {
            setInputState(config.element, config.helper, false, config.messages.error);
          }
        }, CONFIG.validationDelay);

        config.element.addEventListener('input', validateInput);
      });

      // Special case: confirmPassword
      const confirmPassword = document.getElementById('confirmPassword');
      const confirmPasswordHelper = document.getElementById('confirmPasswordHelper');
      const password = validators.password.element;

      const validateConfirmPassword = debounce((e) => {
        const value = e.target.value;
        if (value.length === 0) {
          resetInputState(
            confirmPassword,
            confirmPasswordHelper,
            'Debe coincidir con la contraseña'
          );
        } else if (value === password.value) {
          setInputState(confirmPassword, confirmPasswordHelper, true, 'Las contraseñas coinciden');
        } else {
          setInputState(
            confirmPassword,
            confirmPasswordHelper,
            false,
            'Las contraseñas no coinciden'
          );
        }
      }, CONFIG.validationDelay);

      confirmPassword.addEventListener('input', validateConfirmPassword);

      // Shortcuts for backward compatibility
      const firstName = validators.firstName.element;
      const firstNameHelper = validators.firstName.helper;
      const lastName = validators.lastName.element;
      const lastNameHelper = validators.lastName.helper;
      const email = validators.email.element;
      const emailHelper = validators.email.helper;
      const phone = validators.phone.element;
      const phoneHelper = validators.phone.helper;
      const passwordHelper = validators.password.helper;

      // Form submission
      form.addEventListener('submit', (e) => {
        e.preventDefault();

        // Validate all required fields
        const isFirstNameValid = validateName(firstName.value);
        const isLastNameValid = validateName(lastName.value);
        const isEmailValid = validateEmail(email.value);
        const isPhoneValid = validatePhone(phone.value);
        const isPasswordValid = validatePassword(password.value);
        const isConfirmPasswordValid = confirmPassword.value === password.value;
        const termsCheckbox = document.querySelector('input[name="terms"]');
        const isTermsAccepted = termsCheckbox.checked;

        if (!isFirstNameValid) {
          setInputState(firstName, firstNameHelper, false, 'Mínimo 2 caracteres');
          firstName.focus();
          return;
        }

        if (!isLastNameValid) {
          setInputState(lastName, lastNameHelper, false, 'Mínimo 2 caracteres');
          lastName.focus();
          return;
        }

        if (!isEmailValid) {
          setInputState(email, emailHelper, false, 'Email inválido');
          email.focus();
          return;
        }

        if (!isPhoneValid) {
          setInputState(phone, phoneHelper, false, 'Teléfono inválido');
          phone.focus();
          return;
        }

        if (!isPasswordValid) {
          setInputState(password, passwordHelper, false, 'Contraseña inválida');
          password.focus();
          return;
        }

        if (!isConfirmPasswordValid) {
          setInputState(
            confirmPassword,
            confirmPasswordHelper,
            false,
            'Las contraseñas no coinciden'
          );
          confirmPassword.focus();
          return;
        }

        if (!isTermsAccepted) {
          alert('Debe aceptar los términos y condiciones');
          return;
        }

        // Show loading overlay
        loadingOverlay.classList.add('active');

        // Simulate API call
        setTimeout(() => {
          loadingOverlay.classList.remove('active');
          successModal.classList.add('active');
        }, CONFIG.loadingDelay);
      });

      // Fill form with demo data
      const fillBtn = document.getElementById('fillBtn');

      fillBtn.addEventListener('click', () => {
        // Fill personal information from CONFIG
        firstName.value = CONFIG.demoData.firstName;
        lastName.value = CONFIG.demoData.lastName;
        email.value = CONFIG.demoData.email;
        phone.value = CONFIG.demoData.phone;
        password.value = CONFIG.demoData.password;
        confirmPassword.value = CONFIG.demoData.password;

        // Fill additional information
        document.getElementById('company').value = CONFIG.demoData.company;
        document.getElementById('comments').value = CONFIG.demoData.comments;

        // Select account type
        document.querySelector(
          `input[name="accountType"][value="${CONFIG.demoData.accountType}"]`
        ).checked = true;

        // Check interests
        CONFIG.demoData.interests.forEach((interest) => {
          const checkbox = document.querySelector(`input[name="interests"][value="${interest}"]`);
          if (checkbox) checkbox.checked = true;
        });

        // Accept terms
        document.querySelector('input[name="terms"]').checked = true;

        // Trigger validation for all inputs
        Object.values(validators).forEach(({ element }) => {
          element.dispatchEvent(new Event('input'));
        });
        confirmPassword.dispatchEvent(new Event('input'));
      });

      // Reset form
      resetBtn.addEventListener('click', () => {
        if (confirm('¿Estás seguro de que deseas limpiar el formulario?')) {
          form.reset();
          // Reset all input states
          resetInputState(firstName, firstNameHelper, 'Mínimo 2 caracteres');
          resetInputState(lastName, lastNameHelper, 'Mínimo 2 caracteres');
          resetInputState(email, emailHelper, 'Usaremos este email para contactarlo');
          resetInputState(phone, phoneHelper, 'Formato: +57 XXX XXX XXXX');
          resetInputState(password, passwordHelper, 'Mínimo 8 caracteres, 1 mayúscula, 1 número');
          resetInputState(
            confirmPassword,
            confirmPasswordHelper,
            'Debe coincidir con la contraseña'
          );
        }
      });

      // Close modal
      closeModalBtn.addEventListener('click', () => {
        successModal.classList.remove('active');
        form.reset();
        // Reset all input states
        resetInputState(firstName, firstNameHelper, 'Mínimo 2 caracteres');
        resetInputState(lastName, lastNameHelper, 'Mínimo 2 caracteres');
        resetInputState(email, emailHelper, 'Usaremos este email para contactarlo');
        resetInputState(phone, phoneHelper, 'Formato: +57 XXX XXX XXXX');
        resetInputState(password, passwordHelper, 'Mínimo 8 caracteres, 1 mayúscula, 1 número');
        resetInputState(confirmPassword, confirmPasswordHelper, 'Debe coincidir con la contraseña');
      });
    </script>
  </body>
</html>
