<!doctype html>
<html lang="es" data-sb-ui-brand="davivienda" data-sb-ui-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Seguros Bol√≠var Form.io - Integraci√≥n Completa</title>
    <meta name="sb-ui-css-base-url" content="./dist" />

    <!-- IMPORTANTE: Cargar Form.io primero -->
    <script src="https://cdn.form.io/formiojs/formio.full.min.js"></script>

    <!-- IMPORTANTE: Cargar CSS de Seguros Bol√≠var DESPU√âS de Form.io -->
    <link rel="stylesheet" href="./dist/sb-ui-formio-davivienda-light.min.css" />

    <style>
      body {
        font-family: var(--sb-ui-typography-fontFamily, 'Roboto', Arial, sans-serif);
        margin: 0;
        padding: 2rem;
        background: #f8f9fa;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .header h1 {
        color: var(--sb-ui-color-primary-base, #007acc);
        margin-bottom: 0.5rem;
      }

      .status {
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 2rem;
        font-weight: 600;
      }

      .status.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .status.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .demo-controls {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        align-items: center;
      }

      .demo-controls select,
      .demo-controls button {
        padding: 0.5rem 1rem;
        border: 1px solid #ddd;
        border-radius: 6px;
        background: white;
        cursor: pointer;
        font-size: 0.875rem;
      }

      .demo-controls button:hover {
        background: #f0f0f0;
      }

      #formio-container {
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 2rem;
        background: #fafafa;
        min-height: 400px;
      }

      .instructions {
        background: #e7f3ff;
        border: 1px solid #b3d9ff;
        border-radius: 8px;
        padding: 1.5rem;
        margin-top: 2rem;
      }

      .instructions h3 {
        margin-top: 0;
        color: #0056b3;
      }

      .file-list {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        padding: 1rem;
        margin: 1rem 0;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 0.875rem;
      }

      .file-list strong {
        color: #28a745;
      }

      .code-block {
        background: #f8f9fa;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
        padding: 1rem;
        margin: 1rem 0;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 0.875rem;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üé® Seguros Bol√≠var Form.io - Integraci√≥n Completa</h1>
        <p>Botones del Seguros Bol√≠var UI Design System funcionando en Form.io</p>
      </div>

      <div id="status" class="status">üîÑ Inicializando...</div>

      <div class="demo-controls">
        <strong>Controles:</strong>
        <select id="variantSelect">
          <option value="primary">Primary</option>
          <option value="secondary">Secondary</option>
          <option value="tertiary">Tertiary</option>
          <option value="danger">Danger</option>
          <option value="success">Success</option>
        </select>

        <select id="styleSelect">
          <option value="stroke">Stroke</option>
          <option value="fill" selected>Fill</option>
          <option value="text">Text</option>
        </select>

        <select id="sizeSelect">
          <option value="small">Small</option>
          <option value="medium">Medium</option>
          <option value="large" selected>Large</option>
        </select>

        <button onclick="updateForm()">üîÑ Actualizar Bot√≥n</button>
        <button onclick="testAllVariants()">üé® Probar Todas las Variantes</button>
      </div>

      <div id="formio-container">
        <div id="formio"></div>
      </div>

      <div class="instructions">
        <h3>üìã Instrucciones para Form.io</h3>
        <p><strong>Archivos que necesitas subir a Form.io:</strong></p>

        <div class="file-list">
          <strong>JavaScript:</strong><br />
          üìÅ form-io/dist/sb-ui-formio.min.js<br /><br />

          <strong>CSS (elige uno):</strong><br />
          üìÅ form-io/dist/sb-ui-formio-davivienda-light.min.css<br />
          üìÅ form-io/dist/sb-ui-formio-white-label-light.min.css<br />
          üìÅ form-io/dist/sb-ui-formio-seguros-bolivar-light.min.css
        </div>

        <p><strong>C√≥digo para agregar en Form.io (Custom JavaScript):</strong></p>
        <div class="code-block">
          // Registrar componentes de Seguros Bol√≠var con Form.io if (window.SbUiFormIO &&
          window.Formio && window.Formio.Components) {
          window.SbUiFormIO.registerComponents(window.Formio.Components); console.log('‚úÖ Seguros
          Bol√≠var components registered'); } // Configurar tema (opcional) if (window.SbUiFormIO) {
          window.SbUiFormIO.utils.ThemeManager.setBrand('davivienda');
          window.SbUiFormIO.utils.ThemeManager.setTheme('light'); }
        </div>

        <p><strong>Ejemplo de configuraci√≥n de bot√≥n en Form.io:</strong></p>
        <div class="code-block" id="currentConfig">// La configuraci√≥n se actualizar√° aqu√≠...</div>
      </div>
    </div>

    <!-- IMPORTANTE: Cargar Seguros Bol√≠var DESPU√âS de Form.io -->
    <script src="./dist/sb-ui-formio.min.js"></script>

    <script>
      let currentForm = null;
      let currentConfig = {
        variant: 'primary',
        styleVariant: 'fill',
        size: 'large',
      };

      // Funci√≥n para actualizar el estado
      function updateStatus(message, type = 'info') {
        const statusEl = document.getElementById('status');
        statusEl.textContent = message;
        statusEl.className = `status ${type}`;
      }

      // Funci√≥n para generar configuraci√≥n del formulario
      function generateFormConfig() {
        return {
          components: [
            {
              type: 'button',
              key: 'testButton',
              label: `Bot√≥n ${currentConfig.variant} ${currentConfig.styleVariant} ${currentConfig.size}`,
              variant: currentConfig.variant,
              styleVariant: currentConfig.styleVariant,
              size: currentConfig.size,
              action: 'custom',
              customAction: `
                            alert('¬°Bot√≥n ${currentConfig.variant} ${currentConfig.styleVariant} clickeado!');
                            console.log('Button config:', component);
                        `,
              block: true,
            },
          ],
        };
      }

      // Funci√≥n para crear el formulario
      async function createForm() {
        const container = document.getElementById('formio');
        container.innerHTML =
          '<div style="text-align: center; padding: 2rem;">üîÑ Cargando formulario...</div>';

        try {
          const formConfig = generateFormConfig();
          currentForm = await Formio.createForm(container, formConfig);

          updateStatus(
            '‚úÖ Formulario creado exitosamente - El bot√≥n deber√≠a verse con los estilos de Seguros Bol√≠var',
            'success'
          );
          updateConfigDisplay();

          // Escuchar eventos
          if (window.SbUiFormIO) {
            window.SbUiFormIO.utils.EventBus.on('button:click', (data) => {
              console.log('Button clicked:', data);
            });
          }
        } catch (error) {
          console.error('‚ùå Error creating form:', error);
          updateStatus(`‚ùå Error: ${error.message}`, 'error');
          container.innerHTML = `<div style="color: red; padding: 2rem; text-align: center;">Error: ${error.message}</div>`;
        }
      }

      // Funci√≥n para actualizar el formulario
      function updateForm() {
        currentConfig.variant = document.getElementById('variantSelect').value;
        currentConfig.styleVariant = document.getElementById('styleSelect').value;
        currentConfig.size = document.getElementById('sizeSelect').value;

        createForm();
      }

      // Funci√≥n para probar todas las variantes
      function testAllVariants() {
        const container = document.getElementById('formio');

        const allVariantsConfig = {
          components: [
            // Primary buttons
            {
              type: 'button',
              key: 'primaryStroke',
              label: 'Primary Stroke',
              variant: 'primary',
              styleVariant: 'stroke',
              size: 'medium',
              action: 'custom',
              customAction: 'alert("Primary Stroke clicked!");',
            },
            {
              type: 'button',
              key: 'primaryFill',
              label: 'Primary Fill',
              variant: 'primary',
              styleVariant: 'fill',
              size: 'medium',
              action: 'custom',
              customAction: 'alert("Primary Fill clicked!");',
            },
            {
              type: 'button',
              key: 'primaryText',
              label: 'Primary Text',
              variant: 'primary',
              styleVariant: 'text',
              size: 'medium',
              action: 'custom',
              customAction: 'alert("Primary Text clicked!");',
            },

            // Secondary buttons
            {
              type: 'button',
              key: 'secondaryFill',
              label: 'Secondary Fill',
              variant: 'secondary',
              styleVariant: 'fill',
              size: 'medium',
              action: 'custom',
              customAction: 'alert("Secondary Fill clicked!");',
            },

            // Success and Danger
            {
              type: 'button',
              key: 'successFill',
              label: 'Success Fill',
              variant: 'success',
              styleVariant: 'fill',
              size: 'medium',
              action: 'custom',
              customAction: 'alert("Success clicked!");',
            },
            {
              type: 'button',
              key: 'dangerFill',
              label: 'Danger Fill',
              variant: 'danger',
              styleVariant: 'fill',
              size: 'medium',
              action: 'custom',
              customAction: 'alert("Danger clicked!");',
            },

            // Different sizes
            {
              type: 'button',
              key: 'smallButton',
              label: 'Small',
              variant: 'tertiary',
              styleVariant: 'stroke',
              size: 'small',
              action: 'custom',
              customAction: 'alert("Small button!");',
            },
            {
              type: 'button',
              key: 'largeButton',
              label: 'Large Button',
              variant: 'tertiary',
              styleVariant: 'fill',
              size: 'large',
              action: 'custom',
              customAction: 'alert("Large button!");',
              block: true,
            },
          ],
        };

        Formio.createForm(container, allVariantsConfig)
          .then(() => {
            updateStatus('‚úÖ Mostrando todas las variantes de botones', 'success');
          })
          .catch((error) => {
            updateStatus(`‚ùå Error: ${error.message}`, 'error');
          });
      }

      // Funci√≥n para actualizar la configuraci√≥n mostrada
      function updateConfigDisplay() {
        const configEl = document.getElementById('currentConfig');
        const config = generateFormConfig().components[0];
        configEl.textContent = JSON.stringify(config, null, 2);
      }

      // Verificar dependencias e inicializar
      function initialize() {
        console.log('üöÄ Initializing Seguros Bol√≠var Form.io Integration');

        // Verificar Form.io
        if (!window.Formio) {
          updateStatus('‚ùå Form.io no est√° cargado', 'error');
          return;
        }

        // Verificar Seguros Bol√≠var
        if (!window.SbUiFormIO) {
          updateStatus('‚ùå Seguros Bol√≠var Form.io no est√° cargado', 'error');
          return;
        }

        // Registrar componentes
        try {
          window.SbUiFormIO.registerComponents(window.Formio.Components);
          console.log(
            '‚úÖ Components registered:',
            Object.keys(window.Formio.Components.components)
          );

          // Configurar tema
          window.SbUiFormIO.utils.ThemeManager.setBrand('davivienda');
          window.SbUiFormIO.utils.ThemeManager.setTheme('light');

          // Crear formulario inicial
          createForm();
        } catch (error) {
          console.error('‚ùå Registration error:', error);
          updateStatus(`‚ùå Error de registro: ${error.message}`, 'error');
        }
      }

      // Inicializar cuando el DOM est√© listo
      document.addEventListener('DOMContentLoaded', initialize);

      // Debug info
      console.log('Form.io loaded:', !!window.Formio);
      console.log('Seguros Bol√≠var FormIO loaded:', !!window.SbUiFormIO);
      console.log(
        'Available components:',
        window.Formio?.Components
          ? Object.keys(window.Formio.Components.components)
          : 'Not available'
      );
    </script>
  </body>
</html>
