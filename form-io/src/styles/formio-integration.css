/**
 * Root Block Design System - Form.io Integration Styles
 * Estilos específicos para la integración con Form.io
 */

/* ========================================
   FORM.IO COMPONENT BASE STYLES
   ======================================== */

.formio-component {
  margin-bottom: 1rem;
  position: relative;
}

.formio-component-button {
  display: block;
  width: 100%;
}

/* Asegurar que los estilos de Root Block se apliquen correctamente */
.rb-button-wrapper {
  width: 100%;
}

.rb-button-wrapper .rb-button {
  /* Resetear estilos de Form.io que puedan interferir */
  all: unset;
  box-sizing: border-box;

  /* Aplicar estilos base del Root Block Design System */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;

  /* Spacing - Logical Properties */
  padding-inline: var(--rb-button-padding-inline);
  padding-block: var(--rb-button-padding-block);
  gap: var(--rb-button-gap);

  /* Sizing - Logical Properties */
  min-inline-size: var(--rb-button-min-inline-size);
  min-block-size: var(--rb-button-min-block-size);
  inline-size: auto;

  /* Typography */
  font-family: var(--rb-button-font-family);
  font-style: normal;
  font-weight: var(--rb-button-font-weight);
  font-size: var(--rb-button-font-size);
  line-height: var(--rb-button-line-height);
  text-align: center;
  text-decoration: none;
  white-space: nowrap;

  /* Appearance */
  background-color: var(--rb-button-bg-color);
  color: var(--rb-button-text-color);
  border: var(--rb-button-border-width) solid var(--rb-button-border-color);
  border-radius: var(--rb-button-border-radius);
  box-shadow: var(--rb-button-shadow);
  cursor: pointer;
  user-select: none;

  /* Animation */
  transition: var(--rb-button-transition);
}

/* Forzar que los estilos de hover funcionen */
.rb-button-wrapper .rb-button:hover:not(:disabled):not(.rb-button--disabled) {
  background-color: var(--rb-button-bg-hover) !important;
  color: var(--rb-button-text-hover, var(--rb-button-text-color)) !important;
  box-shadow: var(--rb-button-shadow-hover) !important;
  cursor: pointer;
}

.rb-button-wrapper .rb-button:active:not(:disabled):not(.rb-button--disabled) {
  background-color: var(--rb-button-bg-active) !important;
  color: var(--rb-button-text-active, var(--rb-button-text-color)) !important;
  box-shadow: var(--rb-button-shadow-active) !important;
  cursor: pointer;
}

.rb-button-wrapper .rb-button:focus-visible:not(:disabled):not(.rb-button--disabled) {
  outline: 3px solid var(--rb-color-secondary-L100) !important;
  outline-offset: 4px !important;
}

/* Estados disabled */
.rb-button-wrapper .rb-button:disabled,
.rb-button-wrapper .rb-button.rb-button--disabled {
  background-color: var(--rb-button-bg-disabled) !important;
  color: var(--rb-button-text-disabled) !important;
  border-color: var(--rb-button-border-disabled) !important;
  cursor: not-allowed !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Sobrescribir cualquier estilo de Form.io en botones */
.formio-form button.rb-button,
.formio-component button.rb-button,
button.rb-button {
  /* Resetear completamente */
  all: unset !important;
  box-sizing: border-box !important;

  /* Aplicar estilos del Root Block */
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: relative !important;

  /* Variables CSS se aplicarán automáticamente */
  padding-inline: var(--rb-button-padding-inline) !important;
  padding-block: var(--rb-button-padding-block) !important;
  gap: var(--rb-button-gap) !important;
  min-inline-size: var(--rb-button-min-inline-size) !important;
  min-block-size: var(--rb-button-min-block-size) !important;
  font-family: var(--rb-button-font-family) !important;
  font-size: var(--rb-button-font-size) !important;
  font-weight: var(--rb-button-font-weight) !important;
  line-height: var(--rb-button-line-height) !important;
  background-color: var(--rb-button-bg-color) !important;
  color: var(--rb-button-text-color) !important;
  border: var(--rb-button-border-width) solid var(--rb-button-border-color) !important;
  border-radius: var(--rb-button-border-radius) !important;
  cursor: pointer !important;
  transition: var(--rb-button-transition) !important;
  text-decoration: none !important;
  white-space: nowrap !important;
  user-select: none !important;
}

/* Forzar colores específicos de Davivienda para PRIMARY */
.formio-form button.rb-button.rb-button--primary,
.formio-component button.rb-button.rb-button--primary,
button.rb-button.rb-button--primary {
  /* STROKE style (default) */
  background-color: transparent !important;
  color: #e1111c !important; /* Davivienda Primary Red */
  border: 2px solid #e1111c !important;
}

.formio-form button.rb-button.rb-button--primary:hover,
.formio-component button.rb-button.rb-button--primary:hover,
button.rb-button.rb-button--primary:hover {
  background-color: rgba(225, 17, 28, 0.08) !important; /* Davivienda Primary L400 */
  color: #d70e1a !important; /* Davivienda Primary D100 */
  border-color: #e1111c !important;
}

/* FILL style para PRIMARY */
.formio-form button.rb-button.rb-button--primary.rb-button--fill,
.formio-component button.rb-button.rb-button--primary.rb-button--fill,
button.rb-button.rb-button--primary.rb-button--fill {
  background-color: #e1111c !important; /* Davivienda Primary Red */
  color: #ffffff !important;
  border: 2px solid #e1111c !important;
}

.formio-form button.rb-button.rb-button--primary.rb-button--fill:hover,
.formio-component button.rb-button.rb-button--primary.rb-button--fill:hover,
button.rb-button.rb-button--primary.rb-button--fill:hover {
  background-color: #d70e1a !important; /* Davivienda Primary D100 */
  color: #ffffff !important;
  border-color: #d70e1a !important;
}

/* TEXT style para PRIMARY */
.formio-form button.rb-button.rb-button--primary.rb-button--text,
.formio-component button.rb-button.rb-button--primary.rb-button--text,
button.rb-button.rb-button--primary.rb-button--text {
  background-color: transparent !important;
  color: #e1111c !important; /* Davivienda Primary Red */
  border: none !important;
}

.formio-form button.rb-button.rb-button--primary.rb-button--text:hover,
.formio-component button.rb-button.rb-button--primary.rb-button--text:hover,
button.rb-button.rb-button--primary.rb-button--text:hover {
  background-color: transparent !important;
  color: #d70e1a !important; /* Davivienda Primary D100 */
  text-decoration: underline !important;
}

/* SECONDARY - Davivienda Gray */
.formio-form button.rb-button.rb-button--secondary,
.formio-component button.rb-button.rb-button--secondary,
button.rb-button.rb-button--secondary {
  background-color: transparent !important;
  color: #4b5c6f !important; /* Davivienda Secondary */
  border: 2px solid #4b5c6f !important;
}

.formio-form button.rb-button.rb-button--secondary.rb-button--fill,
.formio-component button.rb-button.rb-button--secondary.rb-button--fill,
button.rb-button.rb-button--secondary.rb-button--fill {
  background-color: #4b5c6f !important; /* Davivienda Secondary */
  color: #e1111c !important; /* Primary text on secondary bg */
  border: 2px solid #4b5c6f !important;
}

/* SUCCESS - Green */
.formio-form button.rb-button.rb-button--success.rb-button--fill,
.formio-component button.rb-button.rb-button--success.rb-button--fill,
button.rb-button.rb-button--success.rb-button--fill {
  background-color: #028846 !important;
  color: #ffffff !important;
  border: 2px solid #028846 !important;
}

/* DANGER - Error Red */
.formio-form button.rb-button.rb-button--danger.rb-button--fill,
.formio-component button.rb-button.rb-button--danger.rb-button--fill,
button.rb-button.rb-button--danger.rb-button--fill {
  background-color: #b70412 !important;
  color: #ffffff !important;
  border: 2px solid #b70412 !important;
}

/* TERTIARY - Yellow */
.formio-form button.rb-button.rb-button--tertiary.rb-button--fill,
.formio-component button.rb-button.rb-button--tertiary.rb-button--fill,
button.rb-button.rb-button--tertiary.rb-button--fill {
  background-color: #fdbb11 !important;
  color: #1b1b1b !important;
  border: 2px solid #fdbb11 !important;
}

/* Asegurar que ningún estilo de Form.io interfiera */
.formio-form .rb-button,
.formio-component .rb-button,
.rb-button {
  background: var(--rb-button-bg-color) !important;
  color: var(--rb-button-text-color) !important;
  border: var(--rb-button-border-width) solid var(--rb-button-border-color) !important;
  border-radius: var(--rb-button-border-radius) !important;
}

/* Eliminar cualquier background azul que pueda venir de Form.io */
.formio-form button,
.formio-component button {
  background: unset !important;
}

.formio-form button.rb-button,
.formio-component button.rb-button {
  background: var(--rb-button-bg-color) !important;
}

/* ========================================
   FORM.IO FORM WRAPPER
   ======================================== */

.formio-form {
  font-family: var(--rb-typography-fontFamily, 'Roboto', sans-serif);
  color: var(--rb-color-grayscale-D300, #404040);
  background: var(--rb-color-grayscale-white, #ffffff);
}

/* ========================================
   FORM.IO LABELS
   ======================================== */

.formio-component-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--rb-color-grayscale-D200, #333333);
  margin-bottom: 0.5rem;
  display: block;
}

.formio-component-label.field-required:after {
  content: ' *';
  color: var(--rb-color-feedback-error-base, #dc3545);
}

/* ========================================
   FORM.IO ERROR MESSAGES
   ======================================== */

.formio-errors {
  margin-top: 0.25rem;
}

.formio-error {
  color: var(--rb-color-feedback-error-base, #dc3545);
  font-size: 0.75rem;
  line-height: 1.4;
}

/* ========================================
   FORM.IO HELP TEXT
   ======================================== */

.formio-component-description {
  font-size: 0.75rem;
  color: var(--rb-color-grayscale-base, #666666);
  margin-top: 0.25rem;
  line-height: 1.4;
}

/* ========================================
   FORM.IO LOADING STATES
   ======================================== */

.formio-loading {
  position: relative;
  pointer-events: none;
  opacity: 0.7;
}

.formio-loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid var(--rb-color-primary-L200, #cce7ff);
  border-radius: 50%;
  border-top-color: var(--rb-color-primary-base, #007acc);
  animation: formio-spinner 0.8s linear infinite;
  z-index: 1000;
}

@keyframes formio-spinner {
  to {
    transform: rotate(360deg);
  }
}

/* ========================================
   FORM.IO VALIDATION STATES
   ======================================== */

.formio-component.has-error .rb-button {
  border-color: var(--rb-color-feedback-error-base, #dc3545);
}

.formio-component.has-success .rb-button {
  border-color: var(--rb-color-feedback-success-base, #28a745);
}

/* ========================================
   FORM.IO DISABLED STATES
   ======================================== */

.formio-component.formio-disabled {
  opacity: 0.6;
  pointer-events: none;
}

.formio-component.formio-disabled .rb-button {
  cursor: not-allowed;
}

/* ========================================
   FORM.IO RESPONSIVE
   ======================================== */

@media (max-width: 768px) {
  .formio-component {
    margin-bottom: 0.75rem;
  }

  .formio-component-button .rb-button:not(.rb-button--icon-only):not(.rb-button--circle) {
    width: 100%;
  }
}

/* ========================================
   FORM.IO THEME INTEGRATION
   ======================================== */

[data-rb-theme='dark'] .formio-form {
  background: var(--rb-color-grayscale-D200, #2d2d2d);
  color: var(--rb-color-grayscale-L200, #e0e0e0);
}

[data-rb-theme='dark'] .formio-component-label {
  color: var(--rb-color-grayscale-L200, #e0e0e0);
}

[data-rb-theme='dark'] .formio-component-description {
  color: var(--rb-color-grayscale-L100, #b9b9b9);
}

/* ========================================
   FORM.IO ACCESSIBILITY
   ======================================== */

.formio-component:focus-within {
  outline: 2px solid var(--rb-color-primary-L100, #80c7ff);
  outline-offset: 2px;
  border-radius: 4px;
}

@media (prefers-reduced-motion: reduce) {
  .formio-loading::after,
  .rb-button {
    animation: none;
  }
}

@media (prefers-contrast: high) {
  .formio-component-label {
    font-weight: 700;
  }

  .formio-error {
    font-weight: 600;
    text-decoration: underline;
  }
}

/* ========================================
   FORM.IO PRINT STYLES
   ======================================== */

@media print {
  .formio-component-button .rb-button {
    background: transparent !important;
    color: black !important;
    border: 1px solid black !important;
    box-shadow: none !important;
  }

  .formio-loading::after {
    display: none !important;
  }
}
