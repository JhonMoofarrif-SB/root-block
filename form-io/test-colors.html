<!doctype html>
<html lang="es" data-rb-brand="davivienda" data-rb-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Colores Davivienda - Form.io</title>

    <!-- Form.io -->
    <script src="https://cdn.form.io/formiojs/formio.full.min.js"></script>

    <!-- Root Block CSS con colores hardcodeados -->
    <link rel="stylesheet" href="./dist/root-block-formio-davivienda-light.min.css" />

    <style>
      body {
        font-family: 'Roboto', Arial, sans-serif;
        margin: 0;
        padding: 2rem;
        background: #f8f9fa;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .test-section {
        margin-bottom: 2rem;
        padding: 1rem;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
      }

      .test-section h3 {
        margin-top: 0;
        color: #e1111c;
      }

      .color-info {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 6px;
        padding: 1rem;
        margin-bottom: 1rem;
        font-size: 0.875rem;
      }

      .manual-test {
        margin: 2rem 0;
        padding: 1rem;
        background: #e7f3ff;
        border-radius: 8px;
      }

      .manual-test button {
        margin: 0.5rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 style="color: #e1111c">üî¥ Test Colores Davivienda</h1>
      <p>Verificando que los botones muestren el color rojo de Davivienda (#e1111c) y NO azul</p>

      <div class="color-info">
        <strong>Colores esperados:</strong><br />
        üî¥ Primary: #e1111c (Rojo Davivienda)<br />
        üîµ Secondary: #4b5c6f (Gris Davivienda)<br />
        üü° Tertiary: #fdbb11 (Amarillo Davivienda)<br />
        üü¢ Success: #028846 (Verde)<br />
        ‚ö´ Danger: #b70412 (Rojo oscuro)
      </div>

      <div class="test-section">
        <h3>Form.io Buttons</h3>
        <div id="formio-test"></div>
      </div>

      <div class="manual-test">
        <h3>Botones Manuales (para comparar)</h3>
        <button class="rb-button rb-button--primary">Primary Stroke</button>
        <button class="rb-button rb-button--primary rb-button--fill">Primary Fill</button>
        <button class="rb-button rb-button--primary rb-button--text">Primary Text</button>
        <br />
        <button class="rb-button rb-button--secondary rb-button--fill">Secondary Fill</button>
        <button class="rb-button rb-button--success rb-button--fill">Success Fill</button>
        <button class="rb-button rb-button--danger rb-button--fill">Danger Fill</button>
        <button class="rb-button rb-button--tertiary rb-button--fill">Tertiary Fill</button>
      </div>

      <div id="status" style="margin-top: 2rem; padding: 1rem; border-radius: 8px">
        üîÑ Inicializando...
      </div>
    </div>

    <!-- Root Block JS -->
    <script src="./dist/root-block-formio.min.js"></script>

    <script>
      function updateStatus(message, success = true) {
        const status = document.getElementById('status');
        status.textContent = message;
        status.style.background = success ? '#d4edda' : '#f8d7da';
        status.style.color = success ? '#155724' : '#721c24';
        status.style.border = success ? '1px solid #c3e6cb' : '1px solid #f5c6cb';
      }

      async function createTestForm() {
        try {
          // Registrar componentes
          if (window.RootBlockFormIO && window.Formio) {
            window.RootBlockFormIO.registerComponents(window.Formio.Components);
            console.log('‚úÖ Components registered');
          }

          const formConfig = {
            components: [
              {
                type: 'button',
                key: 'primaryStroke',
                label: 'Primary Stroke (deber√≠a ser ROJO #e1111c)',
                variant: 'primary',
                styleVariant: 'stroke',
                size: 'medium',
                action: 'custom',
                customAction: 'alert("Primary Stroke - ¬øEs ROJO?");',
              },
              {
                type: 'button',
                key: 'primaryFill',
                label: 'Primary Fill (fondo ROJO #e1111c)',
                variant: 'primary',
                styleVariant: 'fill',
                size: 'medium',
                action: 'custom',
                customAction: 'alert("Primary Fill - ¬øFondo ROJO?");',
              },
              {
                type: 'button',
                key: 'secondaryFill',
                label: 'Secondary Fill (fondo GRIS #4b5c6f)',
                variant: 'secondary',
                styleVariant: 'fill',
                size: 'medium',
                action: 'custom',
                customAction: 'alert("Secondary Fill - ¬øFondo GRIS?");',
              },
              {
                type: 'button',
                key: 'successFill',
                label: 'Success Fill (fondo VERDE #028846)',
                variant: 'success',
                styleVariant: 'fill',
                size: 'medium',
                action: 'custom',
                customAction: 'alert("Success Fill - ¬øFondo VERDE?");',
              },
            ],
          };

          const form = await Formio.createForm(document.getElementById('formio-test'), formConfig);

          updateStatus(
            '‚úÖ Form.io cargado - Verifica que los botones sean ROJOS (no azules)',
            true
          );

          // Verificar colores despu√©s de un momento
          setTimeout(() => {
            const buttons = document.querySelectorAll('#formio-test .rb-button');
            console.log(`Found ${buttons.length} buttons`);

            buttons.forEach((btn, index) => {
              const styles = getComputedStyle(btn);
              console.log(`Button ${index}:`, {
                color: styles.color,
                backgroundColor: styles.backgroundColor,
                borderColor: styles.borderColor,
                classes: btn.className,
              });
            });
          }, 1000);
        } catch (error) {
          console.error('Error:', error);
          updateStatus(`‚ùå Error: ${error.message}`, false);
        }
      }

      // Inicializar cuando est√© listo
      document.addEventListener('DOMContentLoaded', () => {
        if (!window.Formio) {
          updateStatus('‚ùå Form.io no cargado', false);
          return;
        }

        if (!window.RootBlockFormIO) {
          updateStatus('‚ùå Root Block FormIO no cargado', false);
          return;
        }

        createTestForm();
      });

      // Debug
      console.log('Form.io:', !!window.Formio);
      console.log('RootBlockFormIO:', !!window.RootBlockFormIO);
    </script>
  </body>
</html>
